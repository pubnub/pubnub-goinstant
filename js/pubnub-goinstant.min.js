var valueExists=function(n){return!("undefined"==typeof n||null===n)},isFunction=function(n){return!("undefined"==typeof n||null===n||"function"!=typeof n)},pubnub_goinstant=function(){function n(){function n(){}var e=null,t=null;return{connect:function(n,e,t){return this.Connection(n,e,t)},Connection:function(n,o,u){var i=n.slice(15).split("/"),s=!1,c=!1,r=null,f=null;return"undefined"!=typeof o&&"undefined"!=typeof u?(s=!0,c=!0,r=o,f=u):"object"==typeof o?(s=!0,r=o):"function"==typeof o&&(c=!0,f=o),s&&_.has(r,"user")&&(t=r.user),e=PUBNUB.init({publish_key:i[0],subscribe_key:i[1],secret_key:i[2]}),new goinstant2.Connection(e)}}}var e;return{getInstance:function(){return e||(e=n()),e}}}();window.goinstant2=pubnub_goinstant.getInstance(),goinstant2.Connection=function n(e,t){function o(n){var e=new goinstant2.Room(i,n,u);return i.rooms.push(e),e}var u=t,i={connection:this,user:t,rooms:[],pubnub:e};return o("lobby"),{room:function(n){o(n)},rooms:function(){return i.rooms},then:function(n){n(i)}}},goinstant2.Room=function e(n,t,o){function u(n){"join"===n.action?"function"==typeof l.join&&l.join({user:n.uuid}):("leave"===n.action||"timeout"===n.action)&&"function"==typeof l.leave&&l.leave({user:n.uuid})}function i(n,e,t){}var s=n;s.room=this;var c=n.pubnub,r=t,f=o,l={join:null,leave:null,joinLocal:null,leaveLocal:null},a={joined:!1};return{join:function(n){var e={channel:r,presence:function(n){u(n)},message:function(n,e,t){i(n,e,t)},connect:function(){this._state.joined=!0},disconnect:function(){this._state.joined=!1}};"undefined"!==f.displayName&&(e.state={id:f.id,displayName:f.displayName}),c.subscribe(e)},leave:function(){c.unsubscribe({channel:r})},on:function(n,e,t){var o=!1,u=!1,i=null,s=null;"undefined"!=typeof e&&"undefined"!=typeof t?(o=!0,u=!0,i=e,s=t):"object"==typeof e?(o=!0,i=e):"function"==typeof e&&(u=!0,s=e),"join"===n?l.join=s:"leave"===n&&(l.leave=s)},off:function(n,e,t){var o=!1,u=!1,i=!1,s=null,c=null;("undefined"!=typeof n||null!=n)&&(o=!0),"undefined"!=typeof e&&"undefined"!=typeof t?(u=!0,i=!0,s=e,c=t):"object"==typeof e?(u=!0,s=e):"function"==typeof e&&(i=!0,c=e),o||u||i||(l.join=null,l.leave=null)},self:function(){console.log("TODO: return data sync info (KEY) for this user")},user:function(n){console.log("TODO: return data sync info (KEY) for user with userID")},users:function(){console.log("TODO: return data sync info (KEY) for user list")},key:function(n){}}},goinstant2.Channel=function t(n,e){function t(n,e,t){isFunction(r.message)&&message(n)}function o(n,e){var t={err:null},o=function u(n){null!==n&&"undefined"!=typeof n&&(t.err=n)};i.publish({channel:s,message:n,error:o}),isFunction(e)&&e(t)}var u=n,i=u.pubnub,s=e,c={joined:!1},r={message:null};return function f(){var n={channel:s,message:function(n,e,o){t(n,e,o)},connect:function(){this._state.joined=!0},disconnect:function(){this._state.joined=!1}};"undefined"!==_user.displayName&&(n.state={id:_user.id,displayName:_user.displayName}),i.subscribe(n)}(),{message:function(n,e){o(n,e)},on:function(n,e){hasValue(n)&&"message"===n&&isFunction(e)&&(r.message=e)}}},goinstant2.Key=function o(n,e,t,u){function i(){console.log("TODO: Key._getValue("+key+")")}var s=n,c=u,r=e,f=t,l=r+"/"+t,a=null;return{get:function(n){var e={err:null,value:a,context:null};return e},key:function(n){return new goinstant2.Key(r,f+"/"+n,c)},parent:function(){console.log("TODO: return parent key")}}};
//# sourceMappingURL=./pubnub-goinstant.min.map